<!-- products.ejs -->
<!DOCTYPE html>
<html>
<head>
    <title>Products</title>
    <%- include('../partials/head') %>
</head>
<body class="d-flex flex-column min-vh-100">
    <%- include('../partials/header') %>
    <div class="jumbotron">
        <h1>Products</h1>
    </div>
    <div class="container mt-4">
        <div class="row">
            <% products.forEach((product) => { %>
                <%- include('../partials/product', { product: product }) %>
            <% }); %>
        </div>
    </div>

    <script>
        
        $(document).ready(function() {
            
            $('#del').click(function() {
                console.log('Delete button clicked');
                const productId = $(this).data('id');
                $.ajax({
                    url: `/products/${productId}`,
                    method: 'DELETE',
                    success: function(response) {
                        // Reload the page to show updated product list
                        window.location.reload();
                    },
                    error: function(err) {
                        console.log(err);
                    }
                });
            });
        });
    </script>
    
    <%- include('../partials/footer') %>
</body>
</html>